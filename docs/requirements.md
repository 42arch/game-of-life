# Game of Life (Three.js + WebGPU) - 需求文档

## 1. 项目简介
本项目是一个基于 Web 技术的“生命游戏 (Conway's Game of Life)”模拟器。旨在利用现代 Web 图形技术（Three.js, WebGL/WebGPU）提供高性能、大规模的细胞自动机模拟体验，并结合现代化 UI 设计（shadcn/ui）提供良好的用户交互。

## 2. 核心功能需求

### 2.1 模拟核心
*   **高性能模拟:** 支持至少 1024x1024 (约 100 万) 个细胞的实时模拟。
*   **GPU 加速:** 利用 GPGPU (General-Purpose computing on Graphics Processing Units) 技术，将状态计算放在 GPU 片元着色器中进行，以实现极高的帧率。
*   **规则:** 实现标准的康威生命游戏规则（B3/S23）。
    *   **存活:** 活细胞周围有 2 或 3 个活邻居则存活。
    *   **死亡:** 活细胞周围少于 2 个或多于 3 个活邻居则死亡。
    *   **繁殖:** 死细胞周围有 3 个活邻居则变为活细胞。
*   **非正方形网格:** 支持宽和高独立设置的矩形网格（范围 128 - 2048）。

### 2.2 交互与控制
*   **播放控制:**
    *   开始/暂停模拟。
    *   单步执行（可选）。
    *   重置（随机化）当前网格。
    *   清空网格。
*   **绘图模式:**
    *   允许用户使用鼠标/触摸在网格上直接绘制（生成）活细胞。
    *   支持笔刷大小调整。
    *   支持暂停状态下绘制。
*   **视图控制:**
    *   缩放 (Zoom In/Out)。
    *   重置视角。
    *   全屏模式切换。
    *   网格线显示/隐藏。

### 2.3 参数配置
*   **模拟速度:** 可调节模拟的更新频率（迭代速度）。
*   **网格尺寸:** 可独立调整网格的宽度和高度。
*   **颜色定制:** 可自定义“活细胞”和“死细胞”（背景）的颜色。

### 2.4 预设图案 (Library)
*   提供侧边栏图案库。
*   支持拖拽（Drag & Drop）预设图案（如滑翔机、脉冲星等）到场景中生成。

### 2.5 统计信息
*   **实时统计:** 显示当前世代数 (Generation)。
*   **细胞计数:** 实时显示当前存活细胞和死亡细胞的数量。
*   **可视化:** 提供独立的统计卡片，支持显示/隐藏。

## 3. UI/UX 需求
*   **布局:** 采用类似“工具类应用”的布局。
    *   **主视口:** 占据大部分屏幕的 3D/2D 渲染画布。
    *   **侧边栏 (右侧):** 包含所有参数设置、图案库和统计开关。支持折叠。
    *   **底部控制栏:** 悬浮式设计，包含最常用的播放、清除、随机等高频操作。
    *   **浮动组件:** 统计卡片、视图控制按钮悬浮在画布上方。
*   **风格:** 采用深色模式 (Dark Theme)，搭配高对比度的主题色（如 Teal/青色），营造现代科技感。
*   **响应式:** 适配桌面端，并尽可能兼容移动端操作。

## 4. 性能指标
*   **帧率:** 在主流设备上，模拟 1024x1024 网格时保持 30fps 以上（渲染帧率可能更高，模拟帧率受限于设置）。
*   **启动时间:** 页面加载迅速，无明显白屏。
